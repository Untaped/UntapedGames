<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tetris</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }

        /* Navbar Styling */
        .navbar {
            background-color: #333;
            display: flex;
            align-items: center;
            padding: 0 20px;
            height: 60px;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1000;
        }

        .navbar a, .dropbtn {
            color: white;
            text-decoration: none;
            padding: 14px 20px;
            font-size: 17px;
            border-radius: 5px;
            display: inline-block;
            cursor: pointer;
        }

        .navbar a:hover, .dropbtn:hover {
            background-color: #ddd;
            color: black;
        }

        /* Dropdown Menu */
        .dropdown {
            position: relative;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #333;
            min-width: 200px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
        }

        .dropdown-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: #ddd;
            color: black;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        /* Search Bar */
        .search-container {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            padding: 10px;
        }

        #searchInput {
            width: 60%;
            max-width: 600px;
            padding: 15px 20px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 30px;
            outline: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        #searchInput:focus {
            border-color: #333;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        #searchInput::placeholder {
            color: #aaa;
            font-style: italic;
        }

        /* Content Styling */
        .main-content {
            padding: 100px 20px 20px;
        }

        .content-section {
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        /* Game Containers */
        .container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .box {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            padding: 20px;
        }

        .box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .box-content img {
            max-width: 100px;
            height: auto;
            margin-bottom: 10px;
        }

        .box-content h3 {
            font-size: 18px;
            color: #333;
            margin: 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .box-content h3 {
                font-size: 16px;
            }

            .box-content img {
                max-width: 80px;
            }
        }

        /* General styling */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: radial-gradient(circle, #b3c4d6, #acc9e5);
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
        }

        /* Navbar Styling */
        .navbar {
            background-color: #333;
            position: fixed;
            width: 100%;
            top: 0;
            display: flex;
            align-items: center;
            padding: 15px 20px;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
        }

        .navbar a {
            color: white;
            text-decoration: none;
            padding: 14px 20px;
            font-size: 17px;
            margin-right: 20px;
        }

        .navbar a:hover {
            background-color: #ddd;
            color: black;
            border-radius: 5px;
        }

        .search-container {
            flex-grow: 1;
            display: flex;
            justify-content: center;
        }

        #searchInput {
            width: 60%;
            max-width: 600px;
            padding: 12px 20px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 30px;
            outline: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .main-content {
            padding: 100px 20px 20px;
            text-align: center;
        }

        .game-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        canvas {
            border: 5px solid white;
            background-color: #222;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="dropdown" onclick="location.href='index.html';">
            <div class="dropbtn">Home</div>
        </div>
        <div class="dropdown" onclick="location.href='menu.info.html';">
            <div class="dropbtn">About</div>
        </div>
        <div class="dropdown">
            <div class="dropbtn">Untaped</div>
            <div class="dropdown-content">
                <a href="tetris.html">Tetris</a>
                <a href="snake.html">Snake</a>
                <a href="game1.html">Matching</a>
                <a href="2048.html">2048</a>
            </div>
        </div>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search games...">
        </div>
    </div>

    <script src="search.js"></script>

    <div class="main-content">
        <h1><b>Tetris</b></h1>
        <div id="score" style="font-size: 24px; color: white; margin-top: 20px;">
            Score: <span id="scoreValue">0</span>
        </div>
        <div class="game-container">
            <canvas id="gameCanvas" width="300" height="600"></canvas>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Constants
        const WIDTH = 300;
        const HEIGHT = 600;
        const GRID_SIZE = 30;
        const COLUMNS = WIDTH / GRID_SIZE;
        const ROWS = HEIGHT / GRID_SIZE;
        const FPS = 10;

        // Colors
        const BLACK = 'black';
        const WHITE = 'white';
        const COLORS = [
            'cyan',   // I shape
            'red',    // Z shape
            'green',  // S shape
            'orange', // L shape
            'blue',   // J shape
            'purple', // T shape
            'yellow'  // O shape
        ];

        // Tetromino shapes
        const SHAPES = [
            [[1, 1, 1, 1]],  // I shape
            [[1, 1, 1], [0, 1, 0]],  // T shape
            [[1, 1, 1], [1, 0, 0]],  // L shape
            [[1, 1, 1], [0, 0, 1]],  // J shape
            [[1, 1], [1, 1]],        // O shape
            [[0, 1, 1], [1, 1, 0]],  // S shape
            [[1, 1, 0], [0, 1, 1]]   // Z shape
        ];

        // Tetromino class
        class Tetromino {
            constructor(shape, color) {
                this.shape = shape;
                this.color = color;
                this.x = Math.floor(COLUMNS / 2) - Math.floor(shape[0].length / 2);
                this.y = 0;
            }

            move(dx, dy) {
                this.x += dx;
                this.y += dy;
            }

            rotate() {
                this.shape = this.shape[0].map((_, i) => this.shape.map(row => row[i])).reverse();
            }
        }

        let grid = Array.from({ length: ROWS }, () => Array(COLUMNS).fill(BLACK));
        let currentTetromino = new Tetromino(getRandomShape(), getRandomColor());
        let dropCounter = 0;
        let score = 0;  // Variable to track the score

        // Helper functions
        function getRandomShape() {
            return SHAPES[Math.floor(Math.random() * SHAPES.length)];
        }

        function getRandomColor() {
            return COLORS[Math.floor(Math.random() * COLORS.length)];
        }

        function checkCollision(tetromino) {
            for (let i = 0; i < tetromino.shape.length; i++) {
                for (let j = 0; j < tetromino.shape[i].length; j++) {
                    if (tetromino.shape[i][j]) {
                        let x = tetromino.x + j;
                        let y = tetromino.y + i;
                        if (x < 0 || x >= COLUMNS || y >= ROWS || grid[y][x] !== BLACK) {
                            return true;
                        }
                    }
                }
            }
            return false;
        }

        function mergeTetromino(tetromino) {
            tetromino.shape.forEach((row, i) => {
                row.forEach((cell, j) => {
                    if (cell) {
                        grid[tetromino.y + i][tetromino.x + j] = tetromino.color;
                    }
                });
            });
        }

        function clearLines() {
            let linesCleared = 0;
            for (let i = 0; i < grid.length; i++) {
                if (!grid[i].includes(BLACK)) {
                    grid.splice(i, 1);
                    grid.unshift(Array(COLUMNS).fill(BLACK));
                    linesCleared++;
                    i--;
                }
            }
            if (linesCleared > 0) {
                score += linesCleared * 100;  // Add score for each cleared line
                updateScoreDisplay();  // Update the score display
            }
            return linesCleared;
        }

        function updateScoreDisplay() {
            document.getElementById('scoreValue').textContent = score;
        }

        function drawGrid() {
            for (let y = 0; y < ROWS; y++) {
                for (let x = 0; x < COLUMNS; x++) {
                    ctx.fillStyle = grid[y][x];
                    ctx.fillRect(x * GRID_SIZE, y * GRID_SIZE, GRID_SIZE, GRID_SIZE);
                    ctx.strokeStyle = WHITE;
                    ctx.strokeRect(x * GRID_SIZE, y * GRID_SIZE, GRID_SIZE, GRID_SIZE);
                }
            }
        }

        function drawTetromino(tetromino) {
            tetromino.shape.forEach((row, i) => {
                row.forEach((cell, j) => {
                    if (cell) {
                        ctx.fillStyle = tetromino.color;
                        ctx.fillRect(
                            (tetromino.x + j) * GRID_SIZE,
                            (tetromino.y + i) * GRID_SIZE,
                            GRID_SIZE,
                            GRID_SIZE
                        );
                    }
                });
            });
        }

        // Game loop
        function update() {
            dropCounter++;
            if (dropCounter > FPS) {
                currentTetromino.move(0, 1);
                if (checkCollision(currentTetromino)) {
                    currentTetromino.move(0, -1);
                    mergeTetromino(currentTetromino);
                    clearLines();
                    currentTetromino = new Tetromino(getRandomShape(), getRandomColor());
                    if (checkCollision(currentTetromino)) {
                        alert('Game Over!');
                        resetGame();
                    }
                }
                dropCounter = 0;
            }

            ctx.clearRect(0, 0, WIDTH, HEIGHT);
            drawGrid();
            drawTetromino(currentTetromino);
            requestAnimationFrame(update);
        }

        function resetGame() {
            grid = Array.from({ length: ROWS }, () => Array(COLUMNS).fill(BLACK));
            currentTetromino = new Tetromino(getRandomShape(), getRandomColor());
            dropCounter = 0;
            score = 0;  // Reset score on game over
            updateScoreDisplay();  // Update score display
        }

        // Controls
        document.addEventListener('keydown', (event) => {
            const key = event.key.toLowerCase(); // Normalize to lowercase for simplicity

            if (key === 'arrowleft' || key === 'a') {
                currentTetromino.move(-1, 0);
                if (checkCollision(currentTetromino)) {
                    currentTetromino.move(1, 0);
                }
            }
            if (key === 'arrowright' || key === 'd') {
                currentTetromino.move(1, 0);
                if (checkCollision(currentTetromino)) {
                    currentTetromino.move(-1, 0);
                }
            }
            if (key === 'arrowdown' || key === 's') {
                currentTetromino.move(0, 1);
                if (checkCollision(currentTetromino)) {
                    currentTetromino.move(0, -1);
                    mergeTetromino(currentTetromino);
                    clearLines();
                    currentTetromino = new Tetromino(getRandomShape(), getRandomColor());
                    if (checkCollision(currentTetromino)) {
                        alert('Game Over!');
                        resetGame();
                    }
                }
            }
            if (key === 'arrowup' || key === 'w') {
                currentTetromino.rotate();
                if (checkCollision(currentTetromino)) {
                    currentTetromino.rotate();
                    currentTetromino.rotate();
                    currentTetromino.rotate();
                }
            }
        });

        update();
    </script>
</body>
</html>
